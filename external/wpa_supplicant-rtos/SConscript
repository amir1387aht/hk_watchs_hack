from building import *

cwd  = GetCurrentDir()

src  = [
    "port/mbedtls/supp_crypto.c",
    "src/common/wpa_common.c",
    "src/common/ieee802_11_common.c",
    "src/common/hw_features_common.c",
    "src/common/wpa_ctrl.c",
    "src/drivers/driver_common.c",
    "src/drivers/drivers.c",
    "src/l2_packet/l2_packet_freertos.c",
    "src/drivers/driver_freertos.c",
    #"src/drivers/driver_rtthread.c",
    "src/utils/base64.c",
    "src/utils/common.c",
    "src/utils/wpabuf.c",
    "src/utils/bitfield.c",
    # "src/utils/os_freertos.c",
    "src/utils/os_rtthread.c",
    "src/utils/crc32.c",
    "src/utils/ip_addr.c",
    "src/utils/block_alloc.c",
    # "freertos/src/wpa_cli.c",
    "wpa_supplicant/config.c",
    "wpa_supplicant/notify.c",
    "wpa_supplicant/bss.c",
    "wpa_supplicant/eap_register.c",
    "wpa_supplicant/op_classes.c",
    "wpa_supplicant/rrm.c",
    "wpa_supplicant/wmm_ac.c",
    "wpa_supplicant/config_none.c",
    "wpa_supplicant/sme.c",
    "wpa_supplicant/wpa_supplicant.c",
    "wpa_supplicant/events.c",
    "wpa_supplicant/bssid_ignore.c",
    "wpa_supplicant/wpas_glue.c",
    "wpa_supplicant/scan.c",
    "wpa_supplicant/robust_av.c",
    "wpa_supplicant/ctrl_iface.c",
    "wpa_supplicant/ctrl_iface_udp.c",
    "wpa_supplicant/mbo.c",
    "wpa_supplicant/wnm_sta.c",
    "src/utils/wpa_debug.c",
    "freertos/src/supp_main.c",
    "freertos/src/supp_api.c",
    # "wpa_supplicant/ap.c",
    # "src/ap/ap_config.c",
    # "src/ap/ap_drv_ops.c",
    # "src/ap/ap_list.c",
    # "src/ap/ap_mlme.c",
    # "src/ap/authsrv.c",
    # "src/ap/beacon.c",
    # "src/ap/bss_load.c",
    # "src/ap/dfs.c",
    # "src/ap/drv_callbacks.c",
    # "src/ap/eap_user_db.c",
    # "src/ap/hostapd.c",
    # "src/ap/hw_features.c",
    # "src/ap/ieee802_11_auth.c",
    # "src/ap/ieee802_11.c",
    # "src/ap/ieee802_11_he.c",
    # "src/ap/ieee802_11_ht.c",
    # "src/ap/ieee802_11_shared.c",
    # "src/ap/ieee802_11_vht.c",
    # "src/ap/ieee802_1x.c",
    # "src/ap/neighbor_db.c",
    # "src/ap/p2p_hostapd.c",
    # "src/ap/pmksa_cache_auth.c",
    # "src/ap/preauth_auth.c",
    # "src/ap/rrm.c",
    # "src/ap/sta_info.c",
    # "src/ap/tkip_countermeasures.c",
    # "src/ap/utils.c",
    # "src/ap/wmm.c",
    # "src/ap/ctrl_iface_ap.c",
    # "src/ap/mbo_ap.c",
    # "src/ap/wpa_auth.c",
    # "src/ap/wpa_auth_ie.c",
    # "src/ap/wpa_auth_ft.c",
    # "src/ap/wpa_auth_glue.c",
    "src/eap_common/eap_common.c",
    "src/eap_server/eap_server.c",
    "src/eap_server/eap_server_identity.c",
    "src/eap_server/eap_server_methods.c",
    "src/eapol_auth/eapol_auth_sm.c",
    "src/crypto/aes-eax.c",
    "src/crypto/aes-encblock.c",
    "src/crypto/aes-ctr.c",
    "src/crypto/aes-cbc.c",
    "src/crypto/aes-siv.c",
    "src/crypto/aes-unwrap.c",
    "src/crypto/aes-wrap.c",
    "src/crypto/des-internal.c",
    "src/crypto/dh_groups.c",
    "src/crypto/rc4.c",
    "src/crypto/md4-internal.c",
    "src/crypto/md5.c",
    "src/crypto/md5-internal.c",
    "src/crypto/sha1-internal.c",
    "src/crypto/fips_prf_internal.c",
    "src/crypto/sha256-internal.c",
    "src/crypto/sha1.c",
    "src/crypto/sha256.c",
    "src/crypto/tls_none.c",
    "src/crypto/ms_funcs.c",
    "src/crypto/sha1-tlsprf.c",
    "src/crypto/sha1-prf.c",
    "src/crypto/sha256-prf.c",
    "src/crypto/sha1-pbkdf2.c",
    "src/crypto/aes-omac1.c",
    "src/crypto/aes-internal-enc.c",
    "src/crypto/aes-internal-dec.c",
    "src/crypto/aes-internal.c",
    "src/rsn_supp/wpa.c",
    "src/rsn_supp/preauth.c",
    "src/rsn_supp/pmksa_cache.c",
    "src/rsn_supp/wpa_ie.c",
    "src/crypto/crypto_mbedtls2.c",
    "src/crypto/tls_mbedtls2.c",
    "src/crypto/sha256-kdf.c",
    "src/crypto/sha384-kdf.c",
    "src/crypto/sha512-kdf.c",
    "src/common/sae.c",
    "src/common/dragonfly.c",
    "wpa_supplicant/p2p_supplicant.c",
    "wpa_supplicant/p2p_supplicant_sd.c",
    "src/p2p/p2p.c",
    "src/p2p/p2p_utils.c",
    "src/p2p/p2p_parse.c",
    "src/p2p/p2p_build.c",
    "src/p2p/p2p_go_neg.c",
    "src/p2p/p2p_sd.c",
    "src/p2p/p2p_pd.c",
    "src/p2p/p2p_invitation.c",
    "src/p2p/p2p_dev_disc.c",
    "src/p2p/p2p_group.c",
    "src/common/gas.c",
    "wpa_supplicant/gas_query.c",
    "wpa_supplicant/offchannel.c",
    "wpa_supplicant/wps_supplicant.c",
    "src/utils/uuid.c",
    # "src/eap_peer/eap_wsc.c",
    # "src/eap_common/eap_wsc_common.c",
    # "src/wps/wps.c",
    # "src/ap/wps_hostapd.c",
    # "src/wps/wps_common.c",
    # "src/wps/wps_attr_parse.c",
    # "src/wps/wps_attr_build.c",
    # "src/wps/wps_attr_process.c",
    # "src/wps/wps_dev_attr.c",
    # "src/wps/wps_enrollee.c",
    # "src/wps/wps_registrar.c",
    "src/eapol_supp/eapol_supp_sm.c",
    "src/eap_peer/eap.c",
    "src/eap_peer/eap_methods.c",
    "src/eap_peer/eap_tls.c",
    "src/eap_peer/eap_tls_common.c",
    "src/eap_peer/eap_peap.c",
    "src/eap_common/eap_peap_common.c",
    "src/eap_peer/eap_ttls.c",
    "src/eap_peer/eap_mschapv2.c",
    "src/eap_common/chap.c",
    "src/eap_peer/mschapv2.c",
    "src/eap_peer/eap_fast.c",
    "src/eap_peer/eap_fast_pac.c",
    "src/eap_peer/eap_gtc.c",
    "src/eap_common/eap_fast_common.c",
    # "hostapd/hlr_auc_gw.c",
    # "hostapd/ctrl_iface.c",
    # "hostapd/eap_register.c",
    "src/rsn_supp/wpa_ft.c",
    # "src/ap/wnm_ap.c",
    # "src/ap/eth_p_oui.c",
    # "src/eap_server/eap_server_wsc.c",
    "src/eap_server/eap_server_tls.c",
    "src/radius/radius_server.c",
    "src/radius/radius_das.c",
    "src/radius/radius_client.c",
    "src/radius/radius.c",
    # "src/eap_server/eap_sim_db.c",
    "src/eap_common/eap_sim_common.c",
    "src/eap_server/eap_server_ttls.c",
    "src/eap_server/eap_server_tls_common.c",
    "src/eap_server/eap_server_peap.c",
    "src/eap_server/eap_server_mschapv2.c",
    "src/eap_server/eap_server_md5.c",
    "src/eap_server/eap_server_gtc.c",
    "src/eap_server/eap_server_fast.c",
    "src/eap_server/eap_server_sim.c",
    "src/eap_server/eap_server_aka.c",
    # "src/ap/acs.c",
    "src/utils/eloop_freertos.c",
    # "src/utils/eloop_rtthread.c",
    "src/crypto/milenage.c",
    "src/eap_peer/eap_sim.c",
    "src/eap_peer/eap_aka.c",
    "wpa_supplicant/dpp_supplicant.c",
    "wpa_supplicant/interworking.c",
    "src/common/dpp.c",
    "src/common/dpp_auth.c",
    "src/common/dpp_backup.c",
    "src/common/dpp_crypto.c",
    "src/common/dpp_pkex.c",
    "src/common/dpp_reconfig.c",
    "src/common/dpp_tcp.c",
    "src/common/gas_server.c",
    "src/utils/json.c",
    "src/tls/asn1.c",
    "src/ap/dpp_hostapd.c",
    "src/ap/gas_query_ap.c",
    "src/ap/gas_serv.c",
]

path = [
    cwd,
    cwd + '/src',
    cwd + '/src/utils',
    cwd + '/src/common',
    cwd + '/src/crypto',
    # cwd + '/src/ap',
    cwd + '/src/drivers',
    cwd + '/src/eap_common',
    cwd + '/src/eap_peer',
    cwd + '/src/eap_server',
    cwd + '/src/eapol_auth',
    cwd + '/src/eapol_supp',
    cwd + '/src/fst',
    cwd + '/src/l2_packet',
    cwd + '/src/p2p',
    cwd + '/src/pae',
    cwd + '/src/radius',
    cwd + '/src/rsn_supp',
    cwd + '/src/tls',
    cwd + '/src/wps',
    cwd + '/port/mbedtls',
    cwd + '/hostapd',
    cwd + '/wpa_supplicant',
    cwd + '/freertos',
    cwd + '/freertos/src'
]

CPPDEFINES = [
    'USE_RTOS',
    'SDK_OS_FREE_RTOS',
    # 'MBEDTLS_CONFIG_FILE="wpa_supp_mbedtls_config.h"'
]

group = DefineGroup('wpa_supplicant', src, depend = ['PKG_USING_WPA_SUPPLICANT'], CPPPATH = path, CPPDEFINES=CPPDEFINES)

Return('group')
